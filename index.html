<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introduction to automating QA</title>
    <meta charset="utf-8" />
    <meta name="author" content="Statistics Development Team" />
    <script src="index_files/header-attrs-2.8/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Introduction to automating QA
### Statistics Development Team
### 2021/06/01

---








# What we'll cover

???

Remember to record it!!

Introduce self

Implementing RAP is a key aim for our division over the next year

--

- Why we should do automated QA

--

- Examples from teams in DISD

--

- How to get started

--

- Examples of applying template code

--

- Time for questions

???

No bad time for questions, and no stupid questions

Treat RAP in the same way as the data standards and feel free to approach me with any questions or challenges you have whenever they come up

---
layout: true

# Introduction

---

--

- Quality assurance is an essential part of stats production

--

- Manual steps in production and quality assurance can introduce human errors – everybody makes mistakes

--

- Automating these steps greatly reduces the risk of human error during production cycles

--

- The OSR have stated that they **“want to see RAP become the default approach to producing official statistics”**

--

- Automating the QA step of your production cycle is a great step to using RAP in your release and is not as daunting as it may initially sound!

--

---
layout: true

# Why automate your QA?

---

### Benefits for your team

--

- Saves your team time with manual checking and tracking

--

- Helps you spot data errors early, giving you time to correct them before publication

--

- Gives a feel for interesting stories 

???

Helps you with writing the release. Where you might not have had time to sense-check every characteristic breakdown, automated reports can visualise that for you

--

- If your release is on EES, your data will already be in tidy format, making automation so much quicker and easy to apply across a range of files

--

---
layout: true

# Why automate your QA?

---

### Out with the old...


.pull-left[

- How do you answer the question **“am I happy that all my checks pass?”**


- If your QA is **not** automated, this will involve running a check, reviewing the result and amending if needed


]

.pull-right[


![Flowchart of manual QA](images/Old_QA.jpg)


]


---
layout: true

# Why automate your QA?

---

### In with the new!

.center[![Flowchart of automated QA](images/New_QA.jpg)]


--

- How do you answer the question **“am I happy that all my checks pass?”** once you've automated QA?

--

- With automated QA, you can write generalisable code and functions, allowing you to check multiple things at once and review the outcomes of checks in one go

???
You can quickly see if any checks fail, make the relevant amendments and run again.

--

- Much more efficient way to QA 

???
putting the resource into doing it right first will pay off in years to come


---
layout: true

# Examples in DISD

---


## SEN 2

- Automating QA as a part of a larger piece of work to automate the end-to-end pipeline for their release

--

- Quality assurance checks at multiple steps of the pipeline: data entry, calculation of indicators, csv outputs

--

- First team to reach “best practice” in RAP so far

--

- Updates to the “variable_change” file have made it easy to transition across for this year

--

###[Demo of SEN2 QA report](examples/QA_2020_output.html)


---
layout: true

# Examples in DISD

---


## KS4


- Previous QA involved separate checklists for every file produced

???
time consuming and resource intensive, particularly for LA files

--

- Team were brand new users to R

--

- Working with team members to learn R and Rmarkdown with a relevant example, automating their QA reports

--

- Outputs give an overview of checks that used to take lots of manual resource and had potential for human error with VLOOKUPS/index matching etc.

--

- Lots of data can be viewed at once – helps with storytelling and writing the release

--

###[Demo of KS4 QA report](examples/KS4_QA_report.html)


---
layout: true

# Examples in DISD

---


## CLA

- To add detail here

---
layout: true

# How do I start?

---

- Once you have R and Rstudio downloaded, you can begin automating QA.

--

- We have some template code on [GitHub](https://github.com/dfe-analytical-services/automated-data-qa) that can be used to run some suggested basic checks.


--
- These cover basic checks like minimum/maximum/average values for indicators, counts for suppressed numbers, checks for duplicates

--

- There are also some templates for scatter plots to look at comparing data by time period

--

- You’ll want to include more specific tests to your data too, e.g.

--
+ Do filter subtotals add up to totals?
+ Are percentages and averages calculated correctly?
+ How do indicators change when you apply various filters?

---
layout: true

# How do I start?

---

## Applying templates


```
check_LA_region_totals &lt;- function(indicator) #&lt;&lt;

{
function_definition_here %&gt;% filter(indicator)
}

```
--

- Our templates are written as functions that you can apply to your tidy data

--

- The arguments the function takes are defined inside the function brackets **function()**

--

- To run the code, you just need to tell the R what you want variable you want it to look at, e.g.:

```
check_LA_region_totals(number_on_roll)

```



---
layout: true

# QA-ing your QA

---

- To take it one step further, you can write unit tests on your QA code using dummy data

--

- Unit tests basically check that all your code is working as expected on dummy data, before you run it on real data

--

- This can be really useful for complicated quality assurance checks, making sure that the code is running as you expect.

--

- Build trustworthiness into your code and take human error out of it!


---
layout: true

# Partnership programme

---

- Statistics Development Team working alongside your team to deliver an agreed product by a set time

--

- Help upskill your team in using SQL and R, working towards automated QA

--

- Have a project that you can apply to other files or releases that your team produce

--

- Work your way up the [RAP levels](https://rsconnect/rsc/publication-self-assessment/)


---
layout: true

# Questions?

---

**If you have any further questions or are interested in our partnership programme, please get in touch:**

[statistics.development@education.gov.uk](mailto:statistics.development@education.gov.uk)

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;

Made with [xaringan](https://bookdown.org/yihui/rmarkdown/xaringan.html) package in R

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create();
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
